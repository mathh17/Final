<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

    <link rel="stylesheet" href="css/css.css">
    <link rel="stylesheet" href="css/foundation.css">
    <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:400,500,700" rel="stylesheet">
    <script src="js/js.js"></script>
    <script src="js/custom.modernizr.js"></script>
    <script src="js/jquery-1.12.4.js"></script>
    <script src="js/TeamObject.js"></script>
    <script src="js/TrainerObject.js"></script>
    <script src="js/InfoObject.js"></script>

</head>

<body>
    <header>
        <div class="large-12 topmenu">
            <a href="index.html">FORSIDE</a>
            <a href="booking.html">BOOKING</a>
            <a href="medlem.html">MEDLEMSKAB</a>
            <div class="team">
                <a href="opretHold.html">OPRET HOLD</a>
            </div>
        </div>

        <br>


    </header>

    <form>
        HOLDNAVN:<br>
        <input type="text" name="holdnavn" id="holdnavn"><br> TRÆNER:
        <br>
        <select type="text" id="trainers" onchange="trainerSelect()">
            <option value="søren">Søren</option>
            <option value="katrine">Katrine</option>
            <option value="anders">Anders</option>
        </select> SAL:
        <br>
        <input type="text" name="lokation" id="lokation"> <br> Max. Deltagere
        <input type="text" name="maxDeltagere" id="maxDeltagere"> <br>


    </form>
    STARTIME
    <select name="starTime" id="startHours" onchange="myFunction()">
    </select> :
    <select name="startTime" id="startMinutes" onchange="myFunction2()">
    </select> <br> ENDTIME
    <select name="endTime" id="endHours" onchange="myFunction3()">
    </select> :
    <select name="endTime" id="endMinutes" onchange="myFunction4()">
    </select> DURATION :
    <p id="duration"></p>


    <br>
    <br>
    <button id="opretHold">Opret Hold</button>
    <p id="demo"></p>
</body>

<script>
    // STARTHOUR
    for (var i = 0; i <= 23; i++) {
        let select = document.getElementById('startHours');
        var opt = document.createElement('option');
        var hours = i;
        opt.value = i;
        if (hours.toString().length == 1) {
            opt.innerHTML = '0' + hours;
        } else {
            opt.innerHTML = hours;

        }
        select.appendChild(opt);
    }

    function myFunction() {
        var x = document.getElementById("startHours");
        var i = x.selectedIndex;
        var text = document.getElementById("demo").innerHTML = x.options[i].text;
        var first = text;
        return first;
    }

    // STARTMINUTES

    for (var i = 0; i <= 55; i += 5) {
        let select = document.getElementById('startMinutes');
        let opt = document.createElement('option');
        let minutes = i;
        opt.value = i;
        if (minutes.toString().length == 1) {
            opt.innerHTML = '0' + minutes;
        } else {
            opt.innerHTML = minutes;
        }
        select.appendChild(opt);
    }

    function myFunction2() {
        var x = document.getElementById("startMinutes");
        var i = x.selectedIndex;
        var text = document.getElementById("demo").innerHTML = x.options[i].text;
        var second = text;
        return second;

    }

    // ENDHOURS

    for (var i = 0; i <= 23; i++) {
        let select = document.getElementById('endHours');
        let opt = document.createElement('option');
        let hours = i;
        if (hours.toString().length == 1) {
            opt.innerHTML = '0' + hours;
        } else {
            opt.innerHTML = hours;

        }
        opt.value = i;
        select.appendChild(opt);
    }

    function myFunction3() {
        var x = document.getElementById("endHours");
        var i = x.selectedIndex;
        var text = document.getElementById("demo").innerHTML = x.options[i].text;
        var third = text;
        return third;

    }

    //ENDMINUTS

    for (var i = 0; i <= 55; i += 5) {
        let select = document.getElementById('endMinutes');
        let opt = document.createElement('option');
        let minutes = i;
        if (minutes.toString().length == 1) {
            opt.innerHTML = '0' + minutes;
        } else {
            opt.innerHTML = minutes;

        }
        opt.value = i;
        select.appendChild(opt);
    }

    function myFunction4() {
        var x = document.getElementById("endMinutes");
        var i = x.selectedIndex;

        var text = document.getElementById("demo").innerHTML = x.options[i].text;
        var fourth = text;
        return fourth;
    }

    function calculateDuration() {
        var min1 = myFunction3() * 60 + myFunction4() * 1;
        var min2 = myFunction() * 60 + myFunction2() * 1;

        var theTime = ((min1 - min2));

        document.getElementById("duration").innerHTML = theTime

        return theTime;

    }


    function teamStartTime(){
        var startHour = myFunction();
        var startMinut =  myFunction2();
        return startHour+ ":"+ startMinut;
    }
    
    function teamEndTime(){
        var endHour = myFunction3();
        var endMinutes = myFunction4();
        return endHour+ ":"+ endMinutes;
    }


    // TAGER INFO FRA FORM  
    function storeTeamLocation() {
        var locationId = document.getElementById("lokation");
        var newLokationName = locationId.value.toString();
        return newLokationName;
    }

    function storeTeamName() {
        var nameId = document.getElementById("holdnavn");
        var newTeamName = nameId.value.toString();
        return newTeamName;
    }


    function storeMaxParticipants() {
        var maxParticipantId = document.getElementById("maxDeltagere");
        var newMaxParticipants = parseInt(maxParticipantId.value);
        return newMaxParticipants;
    }

    function trainerSelect() {
        var x = document.getElementById('trainers');
        var i = x.selectedIndex;
        if (i == 0) {
            return trainerArray[0].trainerName;
        } else if (i == 1) {
            return trainerArray[1].trainerName;
        } else if (i == 2) {
            return trainerArray[2].trainerName;
        }
    }

    document.getElementById("opretHold").addEventListener("click", function() {
        teamStartTime();
        calculateDuration();
        var newTeam = new TeamObject(
            storeTeamName(),
            teamStartTime(),
            teamEndTime(),
            calculateDuration(),
            trainerSelect(),
            storeTeamLocation(),
            storeMaxParticipants(),
            "Du skal cykle");
        console.log(newTeam);
    });
</script>

</html>
